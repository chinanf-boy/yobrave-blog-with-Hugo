---
title: "Rust周报 375(译)"
date: 2021-01-30T00:04:59+08:00
tags: ["week"]
description: "this-week-in-rust.org 螃蟹-Rust周报-375"
css: ["/css/main.css", "/css/stylesheet.css", "/css/rust-week.css"]
series: "Rust周报-中文"
draft: false
---

- [this-week-in-rust](https://this-week-in-rust.org)
- 日期：2021-01-27
- [原文：375 期](https://this-week-in-rust.org/blog/2021/01/27/this-week-in-rust-375/)

你好，欢迎再来一期*本周的螃蟹行情*！[Rust](http://rust-lang.org)是一种追求三位一体的系统语言：安全性、并发性和速度。这是它的进展和社区的每周总结。有什么要说的吗？推特[@ThisWeekInRust](https://twitter.com/ThisWeekInRust)或[向我们发送请求](https://github.com/cmr/this-week-in-rust)。 想参与吗？[我们热爱贡献](https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md).

*这本周的螃蟹行情*是在[在 Github 上](https://github.com/cmr/this-week-in-rust)公开的。如果你在本周的问题中发现任何错误，[请提交 PR](https://github.com/cmr/this-week-in-rust/pulls)。

# Updates from Rust Community

### Official

- \[Inside] [Rust & the case of the disappearing stack frames](https://blog.rust-lang.org/inside-rust/2021/01/26/ffi-unwind-longjmp.html)

### Newsletters

### Project/Tooling Updates

- [rust-analyzer Changelog #61](https://rust-analyzer.github.io/thisweek/2021/01/25/changelog-61.html)
- [性能提速 on front-end generated by rustdoc](https://blog.guillaume-gomez.fr/articles/2021-01-22+Performance+improvement+on+front-end+generated+by+rustdoc)
- [Criterion.rs v0.3.4 and Iai 0.1.0](https://bheisler.github.io/post/criterion-rs-0-3-4/)
- [The RustyHermit Unikernel（强化型单核系统）](https://rust-osdev.com/showcase/rusty-hermit/)
- [Introducing usb-ids.rs](https://blog.yossarian.net/2021/01/21/Introducing-usb-ids-rs)
- ⚡️ [Dotenv-linter v3.0.0: Overview](https://evrone.com/dotenv-linter-v300) 🦀
- 🧮 [An Auto-Increment Crate for Rust](https://jeffa.io/an_auto-increment_crate_for_rust)

### Observations/Thoughts

- [移植一个 serverless 聊天机器人 from Python to Rust](https://blog.console.dev/porting-a-python-azure-serverless-function-to-rust/)
- [Unsafe Rust: How and when (not) to use it](https://blog.logrocket.com/unsafe-rust-how-and-when-not-to-use-it/)
- [Rust and Go department directories](https://dev.to/mark_saward/rust-and-go-department-directories-bla)
- [介绍 real-world 数据 with Rust: 介绍 the alias_all attribute in Serde](https://deaddabe.fr/blog/2021/01/27/parsing-real-world-data-with-rust-introducing-the-alias_all-attribute-in-serde/)

### Rust Walkthroughs

- [Wrapping Errors in Rust](https://edgarluque.com/blog/wrapping-errors-in-rust)
- [Implementing Raft's Leader Election（共识算法）in Rust](http://laurocaetano.com/programming/2021/01/23/raft-leader-election-rust/)
- [2048 WASM](https://dev.to/dev_family/2048-wasm-45gc)
- [Implementing an LRU Cache in Rust](https://dev.to/seanchen1991/implementing-an-lru-cache-in-rust-33pp)
- [JSON input validation in Warp](https://dev.to/buinauskas/json-input-validation-in-warp-i5n)
- [Make A Language - Part Nineteen: Code Representations](https://arzg.github.io/lang/19/)
- [Make A Language - Part Twenty: Testing](https://arzg.github.io/lang/20/)
- [How to optimise compilation times with Rust](https://lemmy.ml/post/50089)
- [Criterion 基准测试：Automatic flamegraphs](https://www.jibbow.com/posts/criterion-flamegraphs/)
- [First time using Yew: A Go game board in just a few lines of Rust.](https://radim.xyz/project/yewban/)
- \[ES] [el juego de la vida usando rust y iced](https://github.com/irvingfisica/iced_examples/blob/master/Life.md)

### Miscellaneous

- [Are we learning yet?](https://www.arewelearningyet.com/)
- [Microsoft Opens Up Old Win32 APIs to C# and Rust, More Languages to Come](https://visualstudiomagazine.com/articles/2021/01/21/win32-apis.aspx)
- [A fix for the LLVM noalias bug has landed in time for LLVM 12 branches](https://www.reddit.com/r/rust/comments/l4roqk/a_fix_for_the_llvm_noalias_bug_has_landed_in_time/)
- [Dynamic type systems aren't even simpler](https://hisham.hm/2020/01/20/dynamic-type-systems-arent-even-simpler/)
- [Everywhere I go, I miss Rust's \`enum\`s](https://www.reddit.com/r/rust/comments/l594zl/everywhere_i_go_i_miss_rusts_enums/)
- [Open-Source Rust: 24 Awesome 框架, 项目, 和库](https://serokell.io/blog/open-source-rust)

# Crate of the Week

这周的箱子是[aquamarine](https://github.com/mersinvald/aquamarine)为您的 rustdocs 带来内联图。

谢谢[Willi Kappler](https://users.rust-lang.org/t/crate-of-the-week/2704/874)的建议！

[提交您下周的建议和投票][submit_crate]！

[submit_crate]: https://users.rust-lang.org/t/crate-of-the-week/2704

# Call for Participation

一直想为开源项目做贡献，但不知道从哪里开始？每周我们都会重点介绍 Rust 社区的一些任务，供您选择和开始！

其中一些任务也可能有导师，请访问任务页面以获取更多信息。

- [Fuchsia has several open issues](https://users.rust-lang.org/t/twir-call-for-participation/4821/350)

如果您是 Rust 项目的所有者并且正在寻找贡献者，请提交任务[这里][guidelines]。

[guidelines]: https://users.rust-lang.org/t/twir-call-for-participation/4821

# Updates from Rust Core

共有 299 个拉取请求[在上周合并][merged]

[merged]: https://github.com/search?q=is%3Apr+org%3Arust-lang+is%3Amerged+merged%3A2021-01-18..2021-01-25

- [improve unknown external crate error](https://github.com/rust-lang/rust/pull/81046)
- [处理缺失前缀 `'`的 loop labels, in different positions](https://github.com/rust-lang/rust/pull/81236)
- [improve diagnostics when parsing angle args](https://github.com/rust-lang/rust/pull/80065)
- [准许：mutable references in all const contexts](https://github.com/rust-lang/rust/pull/78578)
- [阻止：query cycles in the MIR inliner](https://github.com/rust-lang/rust/pull/68828)
- [mir: 对 arg is unsized 的情况，改善`size_of` 处理过程](https://github.com/rust-lang/rust/pull/81243)
- [implement `Error` for `&(impl Error)`](https://github.com/rust-lang/rust/pull/75180)
- [change branching in `iter.skip()`](https://github.com/rust-lang/rust/pull/80715)
- [`BufWriter`: 提供 `into_raw_parts`](https://github.com/rust-lang/rust/pull/79705)
- [fix soundness issue for `replace_range` and `range`](https://github.com/rust-lang/rust/pull/81169)
- [在`VecDeque`'s `Hash` implementation 中，避免 `hash_slice`](https://github.com/rust-lang/rust/pull/81170)
- [turn alloc's force_expr macro into a regular macro_rules](https://github.com/rust-lang/rust/pull/81241)
- [hashbrown: add `try_insert_no_grow` method on `RawTable`](https://github.com/rust-lang/hashbrown/pull/229)
- [fix a bug： in Cargo's cyclic dep graph detection](https://github.com/rust-lang/cargo/pull/9075)
- [cargo: 添加额外的帮助到 `cargo new`，还有无效的 package names](https://github.com/rust-lang/cargo/pull/9098)
- [rustdoc: 修复标准版本的渲染 for trait implementors](https://github.com/rust-lang/rust/pull/81302)
- [clippy: `manual_filter_map` and `manual_find_map`](https://github.com/rust-lang/rust-clippy/pull/6591)
- [clippy: new lint: `exhaustive_enums`, `exhaustive_structs`](https://github.com/rust-lang/rust-clippy/pull/6617)

## Rust Compiler Performance Triage

本周继续保持相对较大的汇总趋势，其中通常包含对性能敏感的 PR。 PR 标记为 rollup=never 的，我们需要做到更多，但尚不清楚这样做的精确程度。不过，在汇总中，用于测试合并各个 PR 的工具也应进行改进，以在接下来的几天中更好地工作。

除此之外，本周还出现了一些退步，其中大多数不容易解释。我们正在寻求 PR 作者和审稿人的反馈，以了解是否可以预期结果以及是否可以进行任何操作。

由 **@rylevick** 和 **@simulacrum** 修订，范围：[e05409a02c6e73a3dea6da98798468db2910ca59..1483e67addd37d9bd20ba3b4613b678ee9ad4d68](https://perf.rust-lang.org/?start=e05409a02c6e73a3dea6da98798468db2910ca59&end=1483e67addd37d9bd20ba3b4613b678ee9ad4d68&absolute=false&stat=instructions%3Au)

5 个退步，2 个改进，1 个混合；其中 3 个汇总了

见[full report](https://github.com/rust-lang/rustc-perf/blob/master/triage/2021-01-26.md)更多。

## Approved RFCs

对 Rust 的更改跟随 Rust[RFC (request for comments) process](https://github.com/rust-lang/rfcs#rust-rfcs)。以下是本周批准实施的 RFC：

- [Allow "artifact dependencies" on bin, cdylib, and staticlib crates](https://github.com/rust-lang/rfcs/pull/3028)

## Final Comment Period

每周[the team](https://www.rust-lang.org/team.html)宣布即将做出决定的 RFC 和主要 PR 的“最终评论期”。立即发表您的意见。

### [RFCs](https://github.com/rust-lang/rfcs/labels/final-comment-period)

- [Rust 2021 Roadmap](https://github.com/rust-lang/rfcs/pull/3037)

### [Tracking Issues & PRs](https://github.com/rust-lang/rust/labels/final-comment-period)

- \[disposition: 合并] [remove requirement that forces symmetric and transitive PartialEq impls to exist](https://github.com/rust-lang/rust/pull/81198)
- \[disposition: 合并] [稳定化：`core::slice::fill_with`](https://github.com/rust-lang/rust/pull/81048)
- \[disposition: 合并] [add Box::downcast() for dyn Any + Send + Sync](https://github.com/rust-lang/rust/pull/80945)
- \[disposition: 合并] [稳定化：by-value `[T; N]` iterator `core::array::IntoIter`](https://github.com/rust-lang/rust/pull/80470)
- \[disposition: 合并] [implement missing `AsMut<str>` for `str`](https://github.com/rust-lang/rust/pull/80279)
- \[disposition: 合并] [稳定化：`cargo test -- --include-ignored`](https://github.com/rust-lang/rust/pull/80053)
- \[disposition: 合并] [稳定化：`peekable_next_if`](https://github.com/rust-lang/rust/pull/80011)
- \[disposition: 合并] [rustc: 稳定化 `-Zrun-dsymutil` as `-Csplit-debuginfo`](https://github.com/rust-lang/rust/pull/79570)
- \[disposition: 合并] [稳定化：Arc::{increment,decrement}\_strong_count](https://github.com/rust-lang/rust/pull/79285)
- \[disposition: 合并] [expand/resolve: Turn `#[derive]` into a regular macro attribute](https://github.com/rust-lang/rust/pull/79078)
- \[disposition: 合并] [implement io::Seek for io::Empty](https://github.com/rust-lang/rust/pull/78044)
- \[disposition: 合并] [跟踪问题：`feature(int_bits_const): <integer>::BITS`](https://github.com/rust-lang/rust/issues/76904)
- \[disposition: 合并] [跟踪问题：`fmt::Arguments::as_str()`](https://github.com/rust-lang/rust/issues/74442)

## New RFCs

- [改变：visibility scoping rules for macro_rules macros](https://github.com/rust-lang/rfcs/pull/3067)

# Quote of the Week

> 在 2021 年，将 Rust 描述为系统编程语言就像，将 Microsoft 描述为 Windows 或将 Google 描述为搜索引擎一样。是的，Rust 可以进行系统编程，但是其适用范围更加广泛。

– [Tim McNamara on twitter](https://twitter.com/timClicks/status/1351247765851017216)

Thanks to [Nixon Enraght-Moony](https://users.rust-lang.org/t/twir-quote-of-the-week/328/993) for the suggestion.

[Please submit quotes and vote for next week!](https://users.rust-lang.org/t/twir-quote-of-the-week/328)

_This Week in Rust is edited by: [nellshamrell](https://github.com/nellshamrell), [llogiq](https://github.com/llogiq), and [cdmistman](https://github.com/cdmistman)._

<small>[Discuss on r/rust](https://www.reddit.com/r/rust/comments/l6pfp6/this_week_in_rust_375/)</small>
